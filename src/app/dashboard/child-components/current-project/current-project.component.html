<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation" *ngFor="let company of getFavCompany(); let i = index"
        (click)="activeTab(i)">
        <button class="nav-link" [ngClass]="i == tabIndex ? 'active' : ''" id="home-tab" data-bs-toggle="tab"
            [attr.data-bs-target]="'#home' + i" type="button" role="tab" aria-controls="home" aria-selected="true">
            <img [src]="company.gif" width="80" height="100">
            <div class="mt-2">
                {{company?.name}}
            </div>
        </button>
    </li>

    <li class="nav-item" role="presentation" (click)="resetTab()">
        <button class="nav-link" data-bs-toggle="tab" type="button" role="tab" aria-controls="other"
            aria-selected="false">
            <img src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExN2l1NXdmN21xcWxjbW9maDA5eXEzYml6cnF6aGV5eHo3cnBoem96YyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/KGhpQ5NMoWKQurlHwI/giphy.gif"
                width="80" height="100">
            <div class="mt-2">
                Other
            </div>
        </button>
    </li>
</ul>

<div class="tab-content" id="myTabContent" *ngFor="let company of getFavCompany(); let i = index">
    <div class="tab-pane fade show" [ngClass]="i == tabIndex ? 'active' : ''" id="home{{i}}" role="tabpanel"
        aria-labelledby="home-tab">


        <ul class="nav nav-tabs mt-4 mb-4">
            <li class="nav-item" (click)="subTab = 1">
                <a [ngClass]="subTab == 1 ? 'active' : ''" class="nav-link" aria-current="page"
                    href="javascript:void(0)">Home</a>
            </li>
            <li class="nav-item" (click)="subTab = 2">
                <a [ngClass]="subTab == 2 ? 'active' : ''" class="nav-link" href="javascript:void(0)">Budget</a>
            </li>
            <li class="nav-item" (click)="subTab = 3">
                <a [ngClass]="subTab == 3 ? 'active' : ''" class="nav-link" href="javascript:void(0)">Team</a>
            </li>
            <li class="nav-item" (click)="subTab = 4">
                <a [ngClass]="subTab == 4 ? 'active' : ''" class="nav-link" href="javascript:void(0)">Enhancements &
                    Features</a>
            </li>
            <li class="nav-item" (click)="subTab = 5">
                <a [ngClass]="subTab == 5 ? 'active' : ''" class="nav-link" href="javascript:void(0)">Project Issue</a>
            </li>
            <li class="nav-item" (click)="subTab = 6">
                <a [ngClass]="subTab == 6 ? 'active' : ''" class="nav-link" href="javascript:void(0)">Reassign Task</a>
            </li>
            <li class="nav-item" (click)="subTab = 7">
                <a [ngClass]="subTab == 7 ? 'active' : ''" class="nav-link" href="javascript:void(0)">Downfall</a>
            </li>
            <li class="nav-item" (click)="subTab = 8">
                <a [ngClass]="subTab == 8 ? 'active' : ''" class="nav-link" href="javascript:void(0)">User Feedback</a>
            </li>

        </ul>

        <div class="text-align-end mb-4">
            <img src="../../../../assets/icon/github-mark.svg" width="60" class="cursorPointer mx-2"
                (click)="redirectURL('github')" title="Github">
            <img src="../../../../assets/icon/docker-mark-blue.svg" width="60" class="cursorPointer mx-2"
                (click)="redirectURL('docker')" title="Docker">
            <img src="../../../../assets/icon/digital-ocean.svg" width="60" class="cursorPointer mx-2"
                (click)="redirectURL('digital-ocean')" title="Digital Ocean">
            <img src="https://serverpilot.io/assets/images/logos-badges/serverpilot-logo-vertical-black.svg" width="80"
                class="cursorPointer" (click)="redirectURL('serverpiolt')" title="Server Pilot">
        </div>
        <!-- Home -->
        <div *ngIf="subTab == 1">


            <div class=" row mb-4">
                <div class="col-3" *ngFor="let data of cardList">
                    <div class="card">
                        <div class="card-body">
                            <div class="card-title d-flex justify-content-between align-items-center">
                                <h5>{{data?.title}}</h5>
                                <div class="dropdown">
                                    <i class="fa-solid fa-ellipsis-vertical dropdown-toggle dropdown-toggle-x cursorPointer"
                                        id="dropdownMenuLink" data-bs-toggle="dropdown"></i>

                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                        <li><a class="dropdown-item" href="javascript:void(0)">Yesterday</a>
                                        </li>
                                        <li><a class="dropdown-item" href="javascript:void(0)">2
                                                days ago</a></li>
                                        <li><a class="dropdown-item" href="javascript:void(0)">1
                                                week ago</a></li>
                                    </ul>
                                </div>
                            </div>
                            <h5></h5>

                            <div class="card-text">
                                <apx-chart [series]="data.percentage" [chart]="chartOptions.chart"
                                    [plotOptions]="chartOptions.plotOptions" [labels]="chartOptions.labels"
                                    [stroke]="chartOptions.stroke" [fill]="chartOptions.fill"></apx-chart>
                            </div>

                            <div class="card-text d-flex justify-content-center">
                                <h1 class="{{data?.color}}">
                                    {{data?.total_task_count}}</h1>
                            </div>
                            <h6 class="card-subtitle text-primary d-flex justify-content-center {{data?.color}}">
                                Total
                                Task</h6>
                            <div class=" d-flex justify-content-center text-muted mt-2">
                                {{data?.total_task_title}}:
                                {{data?.rem_task_count}}
                            </div>



                        </div>
                    </div>
                </div>
            </div>


            <div class="row mb-4">
                <div class="col-6 d-flex" style="align-items: stretch;">
                    <div class="card w-100">
                        <div class="card-body">
                            <div class="card-title d-flex justify-content-between align-items-center tooltip-container">
                                <h5>Meeting</h5>

                                <input style="width: 23%;" type="text" [(ngModel)]="date"
                                    class="form-control tooltip-target" #dp="bsDatepicker" bsDatepicker
                                    [minDate]="minDate"
                                    [bsConfig]="{dateInputFormat: 'MM/DD/YYYY', keepDatepickerOpened: true, showWeekNumbers : false}"
                                    (ngModelChange)="meetingDateUpdate($event)">

                                <div class="tooltip-content">
                                    Select a Date
                                </div>
                            </div>
                            <h5></h5>

                            <div class="card-content">
                                <div class="row mb-4">
                                    <div class="mb-2">
                                        <b>Quick Meeting :- </b>
                                        <hr>
                                    </div>
                                    <div class="col-3 d-flex justify-content-center tooltip-container">
                                        <img src="../../../../assets/icon/google-meet.svg" width="50%"
                                            class="tooltip-target" (click)="redirectURL('google')">

                                        <div class="tooltip-content">
                                            Instant Google Meeting
                                        </div>
                                    </div>

                                    <div class="col-3 d-flex justify-content-center tooltip-container">
                                        <img src="../../../../assets/icon/skype-seeklogo.svg" width="50%"
                                            class="tooltip-target" (click)="redirectURL('skype')">

                                        <div class="tooltip-content">
                                            Instant Skype Meeting
                                        </div>
                                    </div>

                                    <div class="col-3 d-flex justify-content-center tooltip-container">
                                        <img src="../../../../assets/icon/Teams_Logo.svg" width="50%"
                                            class="tooltip-target" (click)="redirectURL('team')">

                                        <div class="tooltip-content">
                                            Instant Team Meeting
                                        </div>
                                    </div>

                                    <div class="col-3 d-flex justify-content-center tooltip-container">
                                        <img src="../../../../assets/icon/zm-logo.svg" width="50%"
                                            class="tooltip-target" (click)="redirectURL('zoom')">

                                        <div class="tooltip-content">
                                            Instant Zoom Meeting
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div *ngIf="meetingList.length == 0" class="d-flex justify-content-center">
                                    No meeting for today :)
                                </div>
                                <div class="row">
                                    <div class="col-12">

                                        <div class="mb-2">
                                            <b>Scheduled Meeting :- </b>
                                            <hr>
                                        </div>

                                        <ul class="list-group list-group-flush">

                                            <li class="list-group-item" *ngFor="let data of meetingList; let i = index">
                                                <h5 class="right-align-icon">
                                                    {{data?.agenda}}
                                                    <i class="fas fa-arrow-right text-muted"></i>
                                                </h5>
                                                <div>
                                                    <span>{{data?.date | date : 'M/d/yy, h:mm a'}}</span>
                                                    &nbsp;
                                                    <span class="text-primary">{{data?.meeting_type}}</span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>




                        </div>
                    </div>
                </div>

                <div class="col-6 d-flex" style="align-items: stretch;">
                    <div class="card w-100">
                        <div class="card-body">
                            <div class="card-title d-flex justify-content-between align-items-center">
                                <h5>Notes</h5>
                                <i class="fa-solid fa-plus cursorPointer" (click)="openModal('notes')"></i>
                            </div>
                            <h5></h5>

                            <div class="card-content">


                                <div *ngIf="notesList.length == 0" class="d-flex justify-content-center">
                                    Create one
                                </div>


                                <ul class="list-group list-group-flush">

                                    <li class="list-group-item mb-3" *ngFor="let data of notesList; let i = index">
                                        <div class="row">
                                            <div class="col-10">
                                                {{data?.content | wordLimit:10}}
                                            </div>

                                            <div class="col-2">
                                                <i (click)="updateNotesModal(data)"
                                                    class="fas fa-edit text-success cursorPointer text-end mx-2 fa-1x"></i>
                                                <i (click)="removeNotes(i)"
                                                    class="fas fa-trash-alt text-danger cursorPointer text-end fa-1x"></i>
                                            </div>
                                        </div>
                                    </li>
                                </ul>




                            </div>




                        </div>
                    </div>
                </div>
            </div>






        </div>
        <!-- Home -->

        <!-- Budget -->
        <div *ngIf="subTab == 2">


            <div class="row">

                <div class="col-6">
                    Project Journey
                    <apx-chart [series]="lineChartOptions.series" [chart]="lineChartOptions.chart"
                        [xaxis]="lineChartOptions.xaxis"></apx-chart>
                </div>

                <div class="col-6">
                    Budget
                    <apx-chart [series]="radialChartOptions.series" [chart]="radialChartOptions.chart"
                        [xaxis]="radialChartOptions.xaxis"></apx-chart>
                </div>

                <div class="col-6">
                    Downfall
                    <apx-chart [series]="pieChartOptions.series" [chart]="pieChartOptions.chart"
                        [labels]="pieChartOptions.labels"></apx-chart>
                </div>

                <div class="col-6">
                    Improvements
                </div>



            </div>
            <!-- https://apexcharts.com/docs/chart-types/radar/ -->
        </div>
        <!-- Budget -->

        <!-- Team -->
        <div *ngIf="subTab == 3">
            Team
            <!-- https://apexcharts.com/docs/chart-types/range-bar-chart/ -->
        </div>
        <!-- Team -->

        <!-- Enhancements -->
        <div *ngIf="subTab == 4">
            Enhancements
        </div>
        <!-- Enhancements -->

        <!-- Issues -->
        <div *ngIf="subTab == 5">
            Issues
        </div>
        <!-- Issues -->

        <!-- Reassign -->
        <div *ngIf="subTab == 6">
            Home
        </div>
        <!-- Reassign -->


    </div>
</div>

<div class="tab-content" id="myTabContent" *ngIf="tabIndex == null">
    <div>
        All other project
    </div>
</div>


<div #notesModal class="modal" tabindex="-1" id="notesModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Notes</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    (click)="closeModal()"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="notesForm" (keydown.enter)="notesForm.valid ? addNotes() : false ">
                    <div class="mb-3">
                        <input type="text" class="form-control" placeholder="Content" formControlName="content"
                            [ngClass]="notesForm.get('content')?.invalid && notesForm.get('content')?.touched ? 'is-invalid' : ''">

                        <div *ngIf="notesForm.get('content')?.invalid && (notesForm?.get('content')?.dirty || notesForm.get('content')?.touched)"
                            class="text-danger position-absolute f-16 mx-2">

                            <div *ngIf="notesForm.get('content')?.errors?.['required']">
                                <span style="font-size:12px;">
                                    {{utilities.formRequiredMessage}}</span>
                            </div>

                            <div *ngIf="notesForm.get('content')?.hasError('pattern')">
                                <span style="font-size:12px;">
                                    {{utilities.invalidFormat}}</span>
                            </div>

                            <div *ngIf="notesForm.get('content')?.hasError('maxlength')">
                                <span style="font-size:12px;">
                                    {{utilities.getMaxLength(30)}} </span>
                            </div>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="submit" [disabled]="notesForm.invalid" class="btn btn-primary mt-2"
                    (click)="addNotes()">Submit</button>
            </div>
        </div>
    </div>
</div>